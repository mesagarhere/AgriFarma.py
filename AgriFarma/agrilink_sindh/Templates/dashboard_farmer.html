<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Farmer Dashboard</title>

    <!-- BOOTSTRAP -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f3f6f4;
        }

        .navbar {
            background-color: #2e7d32 !important;
        }

        .navbar-brand, .nav-link {
            color: white !important;
            font-weight: 600;
        }

        .card-title {
            color: #2e7d32;
            font-weight: bold;
        }

        .btn-green {
            background-color: #2e7d32;
            color: white;
        }

        .btn-green:hover {
            background-color: #256628;
        }
    </style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark px-4">
    <a class="navbar-brand" href="#">üë®‚Äçüåæ Farmer Dashboard</a>
    <div class="ms-auto">
        <a href="/logout" class="btn btn-light btn-sm">Logout</a>
    </div>
</nav>

<div class="container mt-4">

    <!-- WELCOME CARD -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h3 class="card-title">Welcome, {{ current_user.name }} üëã</h3>
            <p>Your personalized farming dashboard.</p>
        </div>
    </div>

    <div class="row">

        <!-- POSTS SECTION -->
        <div class="col-md-6">
            <div class="card shadow-sm mb-4">
                <div class="card-body">
                    <h4 class="card-title">üìå Your Posts</h4>

                    <!-- Add Post Form -->
                    <form action="/farmer/post/add" method="POST" class="mb-3">
                        <input type="text" name="title" class="form-control mb-2" placeholder="Post title" required>
                        <textarea name="description" class="form-control mb-2" placeholder="Describe your issue" required></textarea>
                        <button class="btn btn-green">Add Post</button>
                    </form>

                    <ul class="list-group">
                        {% for p in posts %}
                        <li class="list-group-item">
                            <strong>{{ p.title }}</strong><br>
                            <span>{{ p.description }}</span>
                        </li>
                        {% else %}
                        <li class="list-group-item">No posts yet.</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>

        <!-- TASKS SECTION -->
        <div class="col-md-6">
            <div class="card shadow-sm mb-4">
                <div class="card-body">
                    <h4 class="card-title">üìù Your Tasks</h4>

                    <form action="/farmer/task/add" method="POST" class="mb-3">
                        <input type="text" name="title" class="form-control mb-2" placeholder="Task title" required>
                        <button class="btn btn-green">Add Task</button>
                    </form>

                    <ul class="list-group">
                        {% for t in tasks %}
                        <li class="list-group-item">{{ t.title }}</li>
                        {% else %}
                        <li class="list-group-item">No tasks yet.</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>

</body>
</html>
